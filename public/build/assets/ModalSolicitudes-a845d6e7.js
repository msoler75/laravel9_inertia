import{_ as F}from"./Modal-d90e4256.js";import{_ as H,a as I}from"./Avatar-677e03a7.js";import{_ as M}from"./TimeAgo-d7658970.js";import{A as b,c as N,a5 as U,aa as j,K as o,U as d,a0 as _,G as e,J as r,F as c,B as n,Q as y,R as v,W as u,T as k,a1 as O,al as x}from"./iconify-4eda29ca.js";import{P as w,W as T}from"./vue3-tabs-component-2945cbbd.js";import"./Image-e6d08a0a.js";import"./_plugin-vue_export-helper-c27b6911.js";const V={class:"bg-base-200 p-5 flex flex-col gap-5 select-none"},K=e("h3",null,"Solicitudes de ingreso",-1),R={key:0,class:"overflow-y-auto bg-base-100 shadow max-h-[calc(100vh-470px)]"},W={class:"table w-full"},E={class:"divide-y"},G=["href"],J={key:0,class:"py-3 uppercase text-success"},L={key:1,class:"py-3 uppercase text-error"},Q={key:2,class:"flex gap-3 mr-5 flex-shrink-0"},z=["onClick"],X=e("span",{class:"hidden sm:inline"}," aceptar",-1),Y=["onClick"],Z=e("span",{class:"hidden sm:inline"},"denegar",-1),ee={key:1,class:"py-2"},te={key:0,class:"overflow-y-auto bg-base-100 shadow max-h-[calc(100vh-470px)]"},ae={class:"table"},oe=e("thead",null,[e("th",null,"Fecha de solicitud"),e("th",null,"Usuario"),e("th",null,"Respuesta"),e("th"),e("th",null,"Por")],-1),ne={key:0,class:"text-success"},se={key:1,class:"text-error"},re={class:"py-3 flex justify-between sm:justify-end gap-5"},he={__name:"ModalSolicitudes",props:{equipo:{type:Object,required:!0}},setup(p,{expose:S}){const h=p;S({mostrar:q});const l=b([]),C=N(()=>h.equipo.solicitudesPendientes.filter(a=>!a.fecha_aceptacion&&!a.fecha_denegacion).length),i=b(!1);function q(){i.value=!0}U(()=>{axios.get(route("equipo.solicitudes",h.equipo.id)).then(a=>{l.value=a.data}).catch(a=>{console.log(a)})});function $(a){a.fecha_aceptacion=new Date().toISOString(),a.coordinador=x().props.auth.user,axios.get(route("solicitud.aceptar",a.id)).then(s=>{l.value.unshift(a),h.equipo.usuarios.unshift(a.usuario)}).catch(s=>{console.log("error",s),alert("Hubo algún error")})}function B(a){a.fecha_denegacion=new Date().toISOString(),a.coordinador=x().props.auth.user,axios.get(route("solicitud.denegar",a.id)).then(s=>{l.value.unshift(a)}).catch(s=>{console.log("error",s),alert("Hubo algún error")})}return(a,s)=>{const P=H,f=j("Icon"),m=M,g=I,A=F;return o(),d(A,{show:c(i),onClose:s[1]||(s[1]=t=>i.value=!1)},{default:_(()=>[e("div",V,[K,r(c(T),{options:{disableScrollBehavior:!0,useUrlFragment:!1}},{default:_(()=>[r(c(w),{name:`Solicitudes pendientes (${c(C)})`},{default:_(()=>[p.equipo.solicitudesPendientes.length?(o(),n("div",R,[e("table",W,[e("tbody",E,[(o(!0),n(y,null,v(p.equipo.solicitudesPendientes,t=>(o(),n("tr",{key:t.id,class:"cursor-pointer"},[e("td",null,[t.usuario?(o(),d(P,{key:0,user:t.usuario,openTab:""},null,8,["user"])):u("",!0)]),e("td",null,[e("a",{href:a.route("usuario",t.usuario.slug||t.usuario.id),target:"_blank"},k(t.usuario.name)+" <"+k(t.usuario.email)+"> ",9,G)]),e("td",null,[t.fecha_aceptacion?(o(),n("div",J," solicitud aceptada ")):t.fecha_denegacion?(o(),n("div",L," solicitud denegada ")):(o(),n("div",Q,[e("button",{class:"btn",onClick:D=>$(t)},[r(f,{icon:"ph:thumbs-up-duotone"}),X],8,z),e("button",{class:"btn",onClick:D=>B(t)},[r(f,{icon:"ph:thumbs-down-duotone"}),Z],8,Y)]))])]))),128))])])])):(o(),n("div",ee," No hay solicitudes pendientes. "))]),_:1},8,["name"]),r(c(w),{name:"Historial"},{default:_(()=>[c(l).length?(o(),n("div",te,[e("table",ae,[oe,e("tbody",null,[(o(!0),n(y,null,v(c(l),t=>(o(),n("tr",{key:t.id},[e("td",null,[r(m,{date:t.created_at},null,8,["date"])]),e("td",null,[r(g,{user:t.usuario},null,8,["user"])]),e("td",null,[t.fecha_aceptacion?(o(),n("span",ne,"Aceptada")):t.fecha_denegacion?(o(),n("span",se,"Denegada")):u("",!0)]),e("td",null,[t.fecha_aceptacion||t.fecha_denegacion?(o(),d(m,{key:0,date:t.fecha_aceptacion||t.fecha_denegacion},null,8,["date"])):u("",!0)]),e("td",null,[t.coordinador?(o(),d(g,{key:0,user:t.coordinador},null,8,["user"])):u("",!0)])]))),128))])])])):u("",!0)]),_:1})]),_:1}),e("div",re,[e("button",{onClick:s[0]||(s[0]=O(t=>i.value=!1,["prevent"])),type:"button",class:"btn btn-neutral"}," cerrar ")])])]),_:1},8,["show"])}}};export{he as default};
