import{_ as U}from"./Modal-d90e4256.js";import{_ as B}from"./Spinner-244d9358.js";import{_ as D}from"./TipTapEditor-5ec2b491.js";import{_ as M}from"./Image-e6d08a0a.js";import{A as k,r as A,K as i,U as x,a0 as u,G as s,J as l,F as o,C as q,D as C,B as a,T as p,W as F,S as G,a1 as V,ai as W,aj as $}from"./iconify-4eda29ca.js";import{P as g,W as O}from"./vue3-tabs-component-2945cbbd.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./FileManager-1609a591.js";import"./FolderExplorer-c0faf4a6.js";import"./ConfirmationModal-570bb728.js";import"./TimeAgo-d7658970.js";import"./Dropdown-f2c8405d.js";import"./selectors-e4a3c011.js";import"./permisos-625d1cf9.js";import"./index-b7a54f6a.js";import"./markdown-82232cdd.js";const d=c=>(W("data-v-74676136"),c=c(),$(),c),J=["onSubmit"],K=d(()=>s("h3",null,"Configuración del Equipo",-1)),L=d(()=>s("label",{for:"nombre"},"Nombre",-1)),P=["readonly"],z={key:0,class:"error"},H={key:1,class:"text-sm"},Q=d(()=>s("label",{for:"descripcion"},"Descripción",-1)),X={key:0,class:"error"},Y={key:1,class:"text-sm"},Z={class:"flex justify-center"},ee=d(()=>s("label",{for:"imagen"},"Imagen",-1)),oe={key:0,class:"error"},ne={key:1,class:"text-sm"},se=d(()=>s("label",{for:"anuncio"},"Anuncio",-1)),ie={key:0,class:"error"},re={key:1,class:"text-sm"},ae=d(()=>s("label",{for:"reuniones"},"Reuniones",-1)),te={key:0,class:"error"},le={key:1,class:"text-sm"},ce=d(()=>s("label",{for:"informacion"},"informacion",-1)),ue={key:0,class:"error"},de={key:1,class:"text-sm"},me={class:"py-3 flex justify-between sm:justify-end gap-5"},pe={key:0,class:"flex gap-3 btn"},fe={key:1,type:"submit",class:"btn btn-primary"},_e=["onClick"],ge={__name:"ModalConfiguracion",props:{equipo:{type:Object,required:!0}},setup(c,{expose:S}){const f=c;S({mostrar:w});const m=k(null),e=A({id:f.equipo.id,imagen:null,nombre:null,descripcion:null,anuncio:null,reuniones:null,errors:{},processing:!1}),h=["nombre","descripcion","imagen","anuncio","reuniones","informacion"],_=k(!1);function w(){for(const r of h)e[r]=f.equipo[r];e.imagen=null,_.value=!0}function T(r){e.imagen=r.target.files[0]}function y(){Object.keys(e.errors).forEach(r=>{delete e.errors[r]})}function j(){y(),_.value=!1}function I(){const r=new FormData;r.append("nombre",e.nombre),r.append("descripcion",e.descripcion),e.imagen&&r.append("imagen",e.imagen),r.append("anuncio",e.anuncio),r.append("reuniones",e.reuniones),r.append("informacion",e.informacion),console.log(e),e.processing=!0,axios.post(route("equipo.modificar",f.equipo.id),r).then(n=>{e.processing=!1,console.log("guardado!",n);for(const b of h)f.equipo[b]=e[b];f.equipo.imagen=n.data.imagen,y(),_.value=!1}).catch(n=>{e.processing=!1,console.log("error",n),n.response.data.errors?(e.errors=n.response.data.errors,console.log(e.errors),"nombre"in e.errors||"descripcion"in e.errors?m.value.selectTab("#general"):"imagen"in e.errors?m.value.selectTab("#imagen"):"anuncio"in e.errors?m.value.selectTab("#anuncio"):"reuniones"in e.errors?m.value.selectTab("#reuniones"):"informacion"in e.errors&&m.value.selectTab("#informacion")):alert(n.response.data.error)})}return(r,n)=>{const b=M,v=D,E=B,N=U;return i(),x(N,{show:o(_),maxWidth:"lg",onClose:n[5]||(n[5]=t=>_.value=!1)},{default:u(()=>[s("form",{class:"bg-base-200 p-5 select-none",onSubmit:V(I,["prevent"])},[K,l(o(O),{options:{disableScrollBehavior:!0,useUrlFragment:!1},ref_key:"tabsElem",ref:m},{default:u(()=>[l(o(g),{name:"General",class:"space-y-6"},{default:u(()=>[s("div",null,[L,q(s("input",{id:"nombre","onUpdate:modelValue":n[0]||(n[0]=t=>o(e).nombre=t),required:"",readonly:c.equipo.miembros.length>=3,class:"input"},null,8,P),[[C,o(e).nombre]]),o(e).errors.nombre?(i(),a("div",z,p(o(e).errors.nombre[0]),1)):(i(),a("div",H,"Nombre del equipo. No se puede editar si tiene 3 miembros o más. "))]),s("div",null,[Q,q(s("textarea",{id:"descripcion","onUpdate:modelValue":n[1]||(n[1]=t=>o(e).descripcion=t),required:"",class:"shadow textarea w-full"},null,512),[[C,o(e).descripcion]]),o(e).errors.descripcion?(i(),a("div",X,p(o(e).errors.descripcion[0]),1)):(i(),a("div",Y,"Descripción del equipo y sus funciones."))])]),_:1}),l(o(g),{name:"imagen"},{default:u(()=>[s("div",null,[s("div",Z,[c.equipo.imagen?(i(),x(b,{key:0,src:c.equipo.imagen,class:"h-32 mb-8"},null,8,["src"])):F("",!0)]),ee,s("input",{type:"file",id:"imagen",onChange:T,accept:"image/*",class:"file-input"},null,32),o(e).errors.imagen?(i(),a("div",oe,p(o(e).errors.imagen[0]),1)):(i(),a("div",ne,"Sube una nueva imagen si quieres cambiar la actual."))])]),_:1}),l(o(g),{name:"Anuncio",class:"space-y-6"},{default:u(()=>[s("div",null,[se,l(v,{id:"anuncio",modelValue:o(e).anuncio,"onUpdate:modelValue":n[2]||(n[2]=t=>o(e).anuncio=t)},null,8,["modelValue"]),o(e).errors.anuncio?(i(),a("div",ie,p(o(e).errors.anuncio[0]),1)):(i(),a("div",re,"Anuncio de caracter general. Se puede dejar en blanco."))])]),_:1}),l(o(g),{name:"Reuniones"},{default:u(()=>[s("div",null,[ae,l(v,{id:"reuniones",modelValue:o(e).reuniones,"onUpdate:modelValue":n[3]||(n[3]=t=>o(e).reuniones=t)},null,8,["modelValue"]),o(e).errors.reuniones?(i(),a("div",te,p(o(e).errors.reuniones[0]),1)):(i(),a("div",le,"Ejemplo: Los lunes a las 13h. Se puede dejar en blanco. "))])]),_:1}),l(o(g),{name:"Información"},{default:u(()=>[s("div",null,[ce,l(v,{id:"informacion",modelValue:o(e).informacion,"onUpdate:modelValue":n[4]||(n[4]=t=>o(e).informacion=t)},null,8,["modelValue"]),o(e).errors.informacion?(i(),a("div",ue,p(o(e).errors.informacion[0]),1)):(i(),a("div",de,"Información adicional del equipo."))])]),_:1})]),_:1},512),s("div",me,[o(e).processing?(i(),a("div",pe,[l(E),G(" Guardando... ")])):(i(),a("button",fe," Guardar ")),s("button",{onClick:V(j,["prevent"]),type:"button",class:"btn btn-neutral"}," Cancelar ",8,_e)])],40,J)]),_:1},8,["show"])}}},Ue=R(ge,[["__scopeId","data-v-74676136"]]);export{Ue as default};
