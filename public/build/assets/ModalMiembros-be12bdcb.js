import{_ as Ie}from"./ConfirmationModal-570bb728.js";import{_ as we}from"./DangerButton-a8aae548.js";import{_ as Se}from"./SecondaryButton-4543e8b6.js";import{a as Ae}from"./Avatar-677e03a7.js";import{_ as ke}from"./Modal-d90e4256.js";import{A as q,a4 as X,c as G,al as Ce,a5 as Re,K as b,B as C,J as D,a0 as R,G as E,C as ce,D as Le,F as x,H as $e,Q as ae,R as Ne,a2 as Oe,T as Fe,ah as Te,W as H,a1 as je,S as N,U as le}from"./iconify-4eda29ca.js";import{b as P}from"./index-b7a54f6a.js";import"./Image-e6d08a0a.js";import"./_plugin-vue_export-helper-c27b6911.js";function O(s){return Array.isArray?Array.isArray(s):_e(s)==="[object Array]"}const Pe=1/0;function Be(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-Pe?"-0":e}function De(s){return s==null?"":Be(s)}function L(s){return typeof s=="string"}function ge(s){return typeof s=="number"}function Ke(s){return s===!0||s===!1||Ve(s)&&_e(s)=="[object Boolean]"}function me(s){return typeof s=="object"}function Ve(s){return me(s)&&s!==null}function I(s){return s!=null}function J(s){return!s.trim().length}function _e(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const We="Incorrect 'index' type",qe=s=>`Invalid value for key ${s}`,Ue=s=>`Pattern length exceeds max of ${s}.`,He=s=>`Missing ${s} property in key`,ze=s=>`Property 'weight' in key '${s}' must be a positive integer`,he=Object.prototype.hasOwnProperty;class Qe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let r=ve(n);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ve(s){let e=null,t=null,n=null,r=1,o=null;if(L(s)||O(s))n=s,e=ue(s),t=Z(s);else{if(!he.call(s,"name"))throw new Error(He("name"));const i=s.name;if(n=i,he.call(s,"weight")&&(r=s.weight,r<=0))throw new Error(ze(i));e=ue(i),t=Z(i),o=s.getFn}return{path:e,id:t,weight:r,src:n,getFn:o}}function ue(s){return O(s)?s:s.split(".")}function Z(s){return O(s)?s.join("."):s}function Ge(s,e){let t=[],n=!1;const r=(o,i,c)=>{if(I(o))if(!i[c])t.push(o);else{let a=i[c];const l=o[a];if(!I(l))return;if(c===i.length-1&&(L(l)||ge(l)||Ke(l)))t.push(De(l));else if(O(l)){n=!0;for(let h=0,f=l.length;h<f;h+=1)r(l[h],i,c+1)}else i.length&&r(l,i,c+1)}};return r(s,L(e)?e.split("."):e,0),n?t:t[0]}const Ye={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Je={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},Xe={location:0,threshold:.6,distance:100},Ze={useExtendedSearch:!1,getFn:Ge,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var d={...Je,...Ye,...Xe,...Ze};const et=/[^ ]+/g;function tt(s=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(r){const o=r.match(et).length;if(t.has(o))return t.get(o);const i=1/Math.pow(o,.5*s),c=parseFloat(Math.round(i*n)/n);return t.set(o,c),c},clear(){t.clear()}}}class oe{constructor({getFn:e=d.getFn,fieldNormWeight:t=d.fieldNormWeight}={}){this.norm=tt(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();L(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!I(e)||J(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((r,o)=>{let i=r.getFn?r.getFn(e):this.getFn(e,r.path);if(I(i)){if(O(i)){let c=[];const a=[{nestedArrIndex:-1,value:i}];for(;a.length;){const{nestedArrIndex:l,value:h}=a.pop();if(I(h))if(L(h)&&!J(h)){let f={v:h,i:l,n:this.norm.get(h)};c.push(f)}else O(h)&&h.forEach((f,p)=>{a.push({nestedArrIndex:p,value:f})})}n.$[o]=c}else if(L(i)&&!J(i)){let c={v:i,n:this.norm.get(i)};n.$[o]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Me(s,e,{getFn:t=d.getFn,fieldNormWeight:n=d.fieldNormWeight}={}){const r=new oe({getFn:t,fieldNormWeight:n});return r.setKeys(s.map(ve)),r.setSources(e),r.create(),r}function st(s,{getFn:e=d.getFn,fieldNormWeight:t=d.fieldNormWeight}={}){const{keys:n,records:r}=s,o=new oe({getFn:e,fieldNormWeight:t});return o.setKeys(n),o.setIndexRecords(r),o}function Q(s,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:r=d.distance,ignoreLocation:o=d.ignoreLocation}={}){const i=e/s.length;if(o)return i;const c=Math.abs(n-t);return r?i+c/r:c?1:i}function nt(s=[],e=d.minMatchCharLength){let t=[],n=-1,r=-1,o=0;for(let i=s.length;o<i;o+=1){let c=s[o];c&&n===-1?n=o:!c&&n!==-1&&(r=o-1,r-n+1>=e&&t.push([n,r]),n=-1)}return s[o-1]&&o-n>=e&&t.push([n,o-1]),t}const K=32;function rt(s,e,t,{location:n=d.location,distance:r=d.distance,threshold:o=d.threshold,findAllMatches:i=d.findAllMatches,minMatchCharLength:c=d.minMatchCharLength,includeMatches:a=d.includeMatches,ignoreLocation:l=d.ignoreLocation}={}){if(e.length>K)throw new Error(Ue(K));const h=e.length,f=s.length,p=Math.max(0,Math.min(n,f));let m=o,_=p;const M=c>1||a,$=M?Array(f):[];let w;for(;(w=s.indexOf(e,_))>-1;){let y=Q(e,{currentLocation:w,expectedLocation:p,distance:r,ignoreLocation:l});if(m=Math.min(y,m),_=w+h,M){let S=0;for(;S<h;)$[w+S]=1,S+=1}}_=-1;let F=[],u=1,g=h+f;const T=1<<h-1;for(let y=0;y<h;y+=1){let S=0,A=g;for(;S<A;)Q(e,{errors:y,currentLocation:p+A,expectedLocation:p,distance:r,ignoreLocation:l})<=m?S=A:g=A,A=Math.floor((g-S)/2+S);g=A;let v=Math.max(1,p-A+1),V=i?f:Math.min(p+A,f)+h,W=Array(V+2);W[V+1]=(1<<y)-1;for(let k=V;k>=v;k-=1){let z=k-1,ie=t[s.charAt(z)];if(M&&($[z]=+!!ie),W[k]=(W[k+1]<<1|1)&ie,y&&(W[k]|=(F[k+1]|F[k])<<1|1|F[k+1]),W[k]&T&&(u=Q(e,{errors:y,currentLocation:z,expectedLocation:p,distance:r,ignoreLocation:l}),u<=m)){if(m=u,_=z,_<=p)break;v=Math.max(1,2*p-_)}}if(Q(e,{errors:y+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:l})>m)break;F=W}const j={isMatch:_>=0,score:Math.max(.001,u)};if(M){const y=nt($,c);y.length?a&&(j.indices=y):j.isMatch=!1}return j}function ot(s){let e={};for(let t=0,n=s.length;t<n;t+=1){const r=s.charAt(t);e[r]=(e[r]||0)|1<<n-t-1}return e}class ye{constructor(e,{location:t=d.location,threshold:n=d.threshold,distance:r=d.distance,includeMatches:o=d.includeMatches,findAllMatches:i=d.findAllMatches,minMatchCharLength:c=d.minMatchCharLength,isCaseSensitive:a=d.isCaseSensitive,ignoreLocation:l=d.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(p,m)=>{this.chunks.push({pattern:p,alphabet:ot(p),startIndex:m})},f=this.pattern.length;if(f>K){let p=0;const m=f%K,_=f-m;for(;p<_;)h(this.pattern.substr(p,K),p),p+=K;if(m){const M=f-K;h(this.pattern.substr(M),M)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let _={isMatch:!0,score:0};return n&&(_.indices=[[0,e.length-1]]),_}const{location:r,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:a,ignoreLocation:l}=this.options;let h=[],f=0,p=!1;this.chunks.forEach(({pattern:_,alphabet:M,startIndex:$})=>{const{isMatch:w,score:F,indices:u}=rt(e,_,M,{location:r+$,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});w&&(p=!0),f+=F,w&&u&&(h=[...h,...u])});let m={isMatch:p,score:p?f/this.chunks.length:1};return p&&n&&(m.indices=h),m}}class B{constructor(e){this.pattern=e}static isMultiMatch(e){return de(e,this.multiRegex)}static isSingleMatch(e){return de(e,this.singleRegex)}search(){}}function de(s,e){const t=s.match(e);return t?t[1]:null}class it extends B{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ct extends B{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class at extends B{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class lt extends B{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ht extends B{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ut extends B{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class xe extends B{constructor(e,{location:t=d.location,threshold:n=d.threshold,distance:r=d.distance,includeMatches:o=d.includeMatches,findAllMatches:i=d.findAllMatches,minMatchCharLength:c=d.minMatchCharLength,isCaseSensitive:a=d.isCaseSensitive,ignoreLocation:l=d.ignoreLocation}={}){super(e),this._bitapSearch=new ye(e,{location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class be extends B{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const r=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+o,r.push([n,t-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const ee=[it,be,at,lt,ut,ht,ct,xe],fe=ee.length,dt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ft="|";function pt(s,e={}){return s.split(ft).map(t=>{let n=t.trim().split(dt).filter(o=>o&&!!o.trim()),r=[];for(let o=0,i=n.length;o<i;o+=1){const c=n[o];let a=!1,l=-1;for(;!a&&++l<fe;){const h=ee[l];let f=h.isMultiMatch(c);f&&(r.push(new h(f,e)),a=!0)}if(!a)for(l=-1;++l<fe;){const h=ee[l];let f=h.isSingleMatch(c);if(f){r.push(new h(f,e));break}}}return r})}const gt=new Set([xe.type,be.type]);class mt{constructor(e,{isCaseSensitive:t=d.isCaseSensitive,includeMatches:n=d.includeMatches,minMatchCharLength:r=d.minMatchCharLength,ignoreLocation:o=d.ignoreLocation,findAllMatches:i=d.findAllMatches,location:c=d.location,threshold:a=d.threshold,distance:l=d.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:o,location:c,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=pt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let o=0,i=[],c=0;for(let a=0,l=t.length;a<l;a+=1){const h=t[a];i.length=0,o=0;for(let f=0,p=h.length;f<p;f+=1){const m=h[f],{isMatch:_,indices:M,score:$}=m.search(e);if(_){if(o+=1,c+=$,n){const w=m.constructor.type;gt.has(w)?i=[...i,...M]:i.push(M)}}else{c=0,o=0,i.length=0;break}}if(o){let f={isMatch:!0,score:c/o};return n&&(f.indices=i),f}}return{isMatch:!1,score:1}}}const te=[];function _t(...s){te.push(...s)}function se(s,e){for(let t=0,n=te.length;t<n;t+=1){let r=te[t];if(r.condition(s,e))return new r(s,e)}return new ye(s,e)}const Y={AND:"$and",OR:"$or"},ne={PATH:"$path",PATTERN:"$val"},re=s=>!!(s[Y.AND]||s[Y.OR]),vt=s=>!!s[ne.PATH],Mt=s=>!O(s)&&me(s)&&!re(s),pe=s=>({[Y.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function Ee(s,e,{auto:t=!0}={}){const n=r=>{let o=Object.keys(r);const i=vt(r);if(!i&&o.length>1&&!re(r))return n(pe(r));if(Mt(r)){const a=i?r[ne.PATH]:o[0],l=i?r[ne.PATTERN]:r[a];if(!L(l))throw new Error(qe(a));const h={keyId:Z(a),pattern:l};return t&&(h.searcher=se(l,e)),h}let c={children:[],operator:o[0]};return o.forEach(a=>{const l=r[a];O(l)&&l.forEach(h=>{c.children.push(n(h))})}),c};return re(s)||(s=pe(s)),n(s)}function yt(s,{ignoreFieldNorm:e=d.ignoreFieldNorm}){s.forEach(t=>{let n=1;t.matches.forEach(({key:r,norm:o,score:i})=>{const c=r?r.weight:null;n*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(e?1:o))}),t.score=n})}function xt(s,e){const t=s.matches;e.matches=[],I(t)&&t.forEach(n=>{if(!I(n.indices)||!n.indices.length)return;const{indices:r,value:o}=n;let i={indices:r,value:o};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)})}function bt(s,e){e.score=s.score}function Et(s,e,{includeMatches:t=d.includeMatches,includeScore:n=d.includeScore}={}){const r=[];return t&&r.push(xt),n&&r.push(bt),s.map(o=>{const{idx:i}=o,c={item:e[i],refIndex:i};return r.length&&r.forEach(a=>{a(o,c)}),c})}class U{constructor(e,t={},n){this.options={...d,...t},this.options.useExtendedSearch,this._keyStore=new Qe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof oe))throw new Error(We);this._myIndex=t||Me(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){I(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:c}=this.options;let a=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return yt(a,{ignoreFieldNorm:c}),o&&a.sort(i),ge(t)&&t>-1&&(a=a.slice(0,t)),Et(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=se(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:o,i,n:c})=>{if(!I(o))return;const{isMatch:a,score:l,indices:h}=t.searchIn(o);a&&r.push({item:o,idx:i,matches:[{score:l,value:o,norm:c,indices:h}]})}),r}_searchLogical(e){const t=Ee(e,this.options),n=(c,a,l)=>{if(!c.children){const{keyId:f,searcher:p}=c,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:p});return m&&m.length?[{idx:l,item:a,matches:m}]:[]}const h=[];for(let f=0,p=c.children.length;f<p;f+=1){const m=c.children[f],_=n(m,a,l);if(_.length)h.push(..._);else if(c.operator===Y.AND)return[]}return h},r=this._myIndex.records,o={},i=[];return r.forEach(({$:c,i:a})=>{if(I(c)){let l=n(t,c,a);l.length&&(o[a]||(o[a]={idx:a,item:c,matches:[]},i.push(o[a])),l.forEach(({matches:h})=>{o[a].matches.push(...h)}))}}),i}_searchObjectList(e){const t=se(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:i,i:c})=>{if(!I(i))return;let a=[];n.forEach((l,h)=>{a.push(...this._findMatches({key:l,value:i[h],searcher:t}))}),a.length&&o.push({idx:c,item:i,matches:a})}),o}_findMatches({key:e,value:t,searcher:n}){if(!I(t))return[];let r=[];if(O(t))t.forEach(({v:o,i,n:c})=>{if(!I(o))return;const{isMatch:a,score:l,indices:h}=n.searchIn(o);a&&r.push({score:l,key:e,value:o,idx:i,norm:c,indices:h})});else{const{v:o,n:i}=t,{isMatch:c,score:a,indices:l}=n.searchIn(o);c&&r.push({score:a,key:e,value:o,norm:i,indices:l})}return r}}U.version="6.6.2";U.createIndex=Me;U.parseIndex=st;U.config=d;U.parseQuery=Ee;_t(mt);function It(s,e,t){const n=()=>{var i,c;return new U((i=P(e))!=null?i:[],(c=P(t))==null?void 0:c.fuseOptions)},r=q(n());X(()=>{var i;return(i=P(t))==null?void 0:i.fuseOptions},()=>{r.value=n()},{deep:!0}),X(()=>P(e),i=>{r.value.setCollection(i)},{deep:!0});const o=G(()=>{const i=P(t);if(i!=null&&i.matchAllWhenSearchEmpty&&!P(s))return P(e).map((a,l)=>({item:a,refIndex:l}));const c=i==null?void 0:i.resultLimit;return r.value.search(P(s),c?{limit:c}:void 0)});return{fuse:r,results:o}}const wt={class:"bg-base-200 p-5 flex flex-col gap-5 max-h-[90vh] select-none"},St=E("h3",null,"Miembros del Equipo",-1),At={key:0,class:"overflow-y-auto bg-base-100 shadow"},kt={class:"table w-full"},Ct={class:"divide-y"},Rt=["onUpdate:modelValue","onChange"],Lt=E("option",{value:"coordinador"},"coordinador",-1),$t=E("option",{value:""},"miembro",-1),Nt={key:0,value:"eliminar"},Ot={key:1,class:"py-3"},Ft={class:"py-3 flex justify-between sm:justify-end gap-5"},Tt={key:0,class:"text-error"},jt={key:1},Pt={key:2},Bt={key:0},Dt={key:1},Jt={__name:"ModalMiembros",props:{equipo:{type:Object,required:!0}},setup(s,{expose:e}){const t=s;e({mostrar:m});const n=Ce(),r=q({}),o=q(null),i=q(null),c=q(!1),a=q(""),l=It(a,()=>t.equipo.miembros,{fuseOptions:{keys:["nombre","email"],threshold:.3}}),h=G(()=>t.equipo?t.equipo.miembros.filter(u=>u.pivot.rol=="coordinador"):[]),f=G(()=>t.equipo.miembros?a.value?l.results.value.map(u=>u.item):t.equipo.miembros:[]),p=G(()=>f.value.map(u=>(u.pivot.rol===null&&(u.pivot.rol=""),u)).sort((u,g)=>(u.pivot.rol=="coordinador"?-1:0)-(g.pivot.rol=="coordinador"?-1:0)));function m(){a.value="",c.value=!0}function _(u){console.log("changedRol",r.value[u.id],"->",u.pivot.rol),console.log("coordinadores",h.value.length),u.pivot.rol=="eliminar"?(o.value=u,u.pivot.rol=r.value[u.id]):r.value[u.id]=="coordinador"?(console.log("era coordinador"),n.props.auth.user&&n.props.auth.user.id==u.id||h.value.length==0?(console.log("modal confirmación degradar"),i.value=u,u.pivot.rol=r.value[u.id]):M(u)):M(u)}function M(u){console.log("modificarRol",u.id,u.pivot.rol),axios.put(route("equipo.modificarRol",{idEquipo:t.equipo.id,idUsuario:u.id,rol:u.pivot.rol||"miembro"})).then(g=>{if(console.log({response:g}),r.value[u.id]=u.pivot.rol,g.data.nuevoCoordinador){const T=t.equipo.miembros.find(j=>j.id==g.data.nuevoCoordinador);T&&(T.pivot.rol="coordinador",alert((T.name||T.nombre)+" ha adoptado el rol de coordinación del equipo"))}}).catch(g=>{console.log({err:g}),alert(g.response.data.error||"Hubo un error"),u.pivot.rol=r.value[u.id]})}function $(){i.value.pivot.rol="",M(i.value),i.value=null}function w(){r.value={};for(var u of t.equipo.miembros)r.value[u.id]=u.pivot.rol}X(()=>t.equipo,()=>w()),Re(()=>w());function F(){const u=t.equipo.miembros.findIndex(g=>g.id==o.value.id);axios.put(route("equipo.remover",{idEquipo:t.equipo.id,idUsuario:o.value.id})).then(g=>{u>-1&&t.equipo.miembros.splice(u,1),console.log(g.data)}).catch(g=>{console.log({err:g}),alert(g.response.data.error||"Hubo un error")}),o.value=null}return(u,g)=>{const T=ke,j=Ae,y=Se,S=we,A=Ie;return b(),C(ae,null,[D(T,{show:x(c),maxWidth:"sm",onClose:g[2]||(g[2]=v=>c.value=!1)},{default:R(()=>[E("div",wt,[St,ce(E("input",{type:"search",class:"input shadow flex-shrink-0",placeholder:"Buscar...","onUpdate:modelValue":g[0]||(g[0]=v=>$e(a)?a.value=v:null)},null,512),[[Le,x(a)]]),x(p).length?(b(),C("div",At,[E("table",kt,[E("tbody",Ct,[(b(!0),C(ae,null,Ne(x(p),v=>(b(),C("tr",{key:v.id,class:Oe(["cursor-pointer",v.pivot.rol=="coordinador"?"bg-blue-50":""])},[E("td",null,Fe(v.nombre),1),E("td",null,[ce(E("select",{"onUpdate:modelValue":V=>v.pivot.rol=V,class:"select",onChange:V=>_(v)},[Lt,$t,v.pivot.rol!="coordinador"?(b(),C("option",Nt,"eliminar")):H("",!0)],40,Rt),[[Te,v.pivot.rol]])])],2))),128))])])])):x(a)?(b(),C("div",Ot," No hay usuarios con ese nombre")):H("",!0),E("div",Ft,[E("button",{onClick:g[1]||(g[1]=je(v=>c.value=!1,["prevent"])),type:"button",class:"btn btn-neutral"}," cerrar ")])])]),_:1},8,["show"]),D(A,{show:x(o)!=null,onClose:g[4]||(g[4]=v=>o.value=null),centered:""},{title:R(()=>[N(" Eliminar usuario del equipo ")]),content:R(()=>[E("div",null,[N("¿Quieres eliminar a "),x(o)?(b(),le(j,{key:0,user:x(o)},null,8,["user"])):H("",!0),N(" del equipo? ")])]),footer:R(()=>[D(y,{onClick:g[3]||(g[3]=v=>o.value=null)},{default:R(()=>[N(" Cancelar ")]),_:1}),D(S,{class:"ml-3",onClick:F},{default:R(()=>[N(" Eliminar ")]),_:1})]),_:1},8,["show"]),D(A,{show:x(i)!=null,onClose:g[6]||(g[6]=v=>i.value=null),centered:""},{title:R(()=>[N(" Confirmación de cambio ")]),content:R(()=>[x(i).id==u.$page.props.auth.user.id?(b(),C("p",Tt," ¿Quieres dejar de ser coordinador/a de este equipo? ")):(b(),C("p",jt,[N(" ¿Quieres remover los permisos de coordinador/a a "),x(i)?(b(),le(j,{key:0,user:x(i)},null,8,["user"])):H("",!0),N("? ")])),x(h).length==1?(b(),C("p",Pt,"Si lo haces el equipo se quedará sin coordinadores, y se asignará la coordinación al miembro más antiguo.")):H("",!0)]),footer:R(()=>[D(y,{onClick:g[5]||(g[5]=v=>i.value=null)},{default:R(()=>[N(" Cancelar ")]),_:1}),D(S,{class:"ml-3",onClick:$},{default:R(()=>[x(i).id==u.$page.props.auth.user.id?(b(),C("span",Bt,"Dejar la coordinación")):(b(),C("span",Dt,"Remover"))]),_:1})]),_:1},8,["show"])],64)}}};export{Jt as default};
