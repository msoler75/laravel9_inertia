import{_ as ue}from"./Pagination-dbd2dc8c.js";import{_ as de}from"./Spinner-244d9358.js";import{_ as me}from"./Link-906724b9.js";import{_ as pe}from"./GridAppear-5ba2735c.js";import{_ as _e}from"./CardContent-715c5d68.js";import{_ as fe}from"./SearchResultsHeader-99b39dbd.js";import{_ as he}from"./SearchInput-223bbcf6.js";import{_ as ve}from"./Referencia-e2843fe3.js";import{_ as be}from"./Dropdown-f2c8405d.js";import{_ as ge}from"./AdminPanel-c9b93513.js";import{A as x,c as ye,a5 as xe,a4 as M,aa as we,K as s,B as l,J as i,G as o,a0 as S,a2 as z,T as w,F as t,C as p,$ as b,Q as g,R as y,S as f,ah as $,W as T,H as ke,U,a8 as Ce,ai as Se,aj as Te}from"./iconify-4eda29ca.js";import{A as Ae}from"./AppLayout-78f8ede6.js";import{u as qe}from"./selectors-e4a3c011.js";import{_ as Be}from"./_plugin-vue_export-helper-c27b6911.js";import"./app-6a98c07f.js";import"./TimeAgo-d7658970.js";import"./Image-e6d08a0a.js";import"./permisos-625d1cf9.js";import"./Avatar-677e03a7.js";import"./Modal-d90e4256.js";import"./index-b7a54f6a.js";const h=a=>(Se("data-v-2979c891"),a=a(),Te(),a),Ve={class:"container py-12 mx-auto"},Ie={class:"w-full flex gap-7 items-center justify-between"},Le=h(()=>o("h1",{class:"my-0"},"Comunicados de Tseyor",-1)),Me={class:"bg-base-100"},$e=["onClick"],Ue={class:"w-4"},Re={class:"transform translate-y-[1px]"},He={class:"mt-12 mb-16"},De={class:"flex flex-wrap justify-between items-center my-4 gap-x-9 gap-y-7"},Pe={key:0,value:"relevancia"},je=h(()=>o("option",{value:"recientes"},"Recientes primero",-1)),Fe=h(()=>o("option",{value:"cronologico"},"Cronológico",-1)),Ne=h(()=>o("option",{value:"todos"},"Todos los comunicados",-1)),Qe=["value"],Ee=h(()=>o("option",{value:"todos"},"Cualquier año",-1)),Oe=["value"],Ge={class:"w-full flex gap-5 flex-wrap md:flex-nowrap"},ze={class:"flex-grow"},Je={key:0,class:"flex justify-between items-center my-5"},Ke={key:2,class:"table bg-base-100"},We=h(()=>o("thead",null,[o("tr",{class:"table-row"},[o("th",{scope:"col",class:"table-header"},"Fecha"),o("th",{scope:"col",class:"table-header"},"Título")])],-1)),Ye={class:"table-body"},Xe={class:"table-cell"},Ze={class:"table-cell"},eo={key:3},oo={key:0,class:"mt-12 p-8 pb-64 flex gap-4 text-xl items-center"},to={key:1,class:"card bg-base-100 shadow p-8 w-fit mt-12"},ao=h(()=>o("p",null,"Ahora puedes realizar una búsqueda completa en los comunicados.",-1)),so={key:2,class:"flex flex-col gap-5"},no={class:"px-3 pt-1 text-lg font-bold flex items-center gap-5 justify-between"},lo={class:"ml-auto text-sm px-3"},co={class:"bg-base-100 px-5 py-3 max-h-[300px] overflow-y-auto divide-y divide-dashed"},io={key:0,class:"text-neutral opacity-75"},ro=h(()=>o("em",null,"No se han podido precisar los resultados.",-1)),uo=[ro],mo=["innerHTML"],R="Vista normal",J="Listado",A="Búsqueda completa",po=Object.assign({layout:Ae},{__name:"Index",props:{categoria:{},ano:{},orden:{},buscar:{},filtrado:{},listado:{},completo:{},busquedaValida:Boolean},setup(a){const q=a,_=qe();_.vistaComunicados||(_.vistaComunicados=R);const K=new Date().getFullYear(),W={0:"General",1:"TAP",2:"Doce del Muulasterio",3:"Comunicados Muul"},Y=x([{icon:"ph:squares-four-duotone",label:R},{icon:"ph:list-dashes-bold",label:J},{icon:"tabler:list-search",label:A}]),H=[];for(var B=2004;B<=K;B++)H.push(B);const d=x(""),k=x({}),X=window.location.search,D=new URLSearchParams(X);if(D.has("completo")){const u=D.get("completo");console.log("(setup) ex from url?",u),(u==1||u=="1")&&(console.log("vistaComunicados = "+A),_.vistaComunicados=A)}const r=ye(()=>_.vistaComunicados==A),n=x({categoria:q.categoria||"todos",ano:q.ano||"todos",orden:q.orden||"recientes",completo:r.value?1:0});console.log("(setup) ex=",n.value.completo),xe(()=>{M(d,()=>{!d.value&&!r.value&&(n.value.orden="recientes")})}),M(r,u=>{console.log("watched vistaBusquedaCompleta",u),u?(d.value="",n.value.orden="relevancia"):d.value||(n.value.orden="recientes"),n.value.completo=u?1:0,console.log("(watch) ex=",n.value.completo)});const C=x(!1);M(n,u=>{if(!V.value){const I=window.location.href.replace(/\?.*/,"");var c={};d.value&&(c.buscar=d.value),n.value.categoria!="todos"&&(c.categoria=n.value.categoria),n.value.ano!="todos"&&(c.ano=n.value.ano),n.value.orden!="recientes"&&(c.orden=n.value.orden),r.value&&(c.completo=1),(!c.completo||d.value)&&(C.value=!0,Ce.get(I,c))}},{deep:!0});const V=x(!1);function Z(){V.value=!0}function ee(){V.value=!1}function oe(){document.querySelector(".search-input").focus(),window.scrollTo({top:0,behavior:"smooth"})}return(u,c)=>{var F,N,Q,E,O;const I=ge,v=we("Icon"),te=be,P=ve,ae=he,se=fe,ne=_e,le=pe,j=me,ce=de,ie=ue;return s(),l("div",Ve,[i(I,{modelo:"comunicado",necesita:"administrar contenidos",class:"mb-3"}),o("div",Ie,[Le,i(te,{width:"60"},{trigger:S(e=>[o("div",{class:z(["btn btn-neutral btn-sm cursor-pointer gap-3",e.open?"opacity-50":""])},[o("span",null,w(t(_).vistaComunicados),1),p(i(v,{icon:"ph:caret-down-duotone",class:"text-xl"},null,512),[[b,!e.open]]),p(i(v,{icon:"ph:caret-up-duotone",class:"text-xl"},null,512),[[b,e.open]])],2)]),content:S(()=>[o("div",Me,[(s(!0),l(g,null,y(t(Y),e=>(s(),l("div",{key:e.label,class:"flex gap-3 items-center px-4 py-2 hover:bg-base-300 cursor-pointer whitespace-nowrap",onClick:m=>t(_).vistaComunicados=e.label},[o("span",Ue,[p(i(v,{icon:"ph:check"},null,512),[[b,t(_).vistaComunicados==e.label]])]),i(v,{icon:e.icon},null,8,["icon"]),o("span",Re,w(e.label),1)],8,$e))),128))])]),_:1})]),o("p",He,[f("Aquí puedes encontrar todos los comunicados de Tseyor. Son transcripciones de las conversaciones interdimensionales mantenidas con los hermanos de las estrellas con la "),i(P,null,{default:S(()=>[f("telepatía externa ")]),_:1}),f(" a través de nuestro "),i(P,null,{default:S(()=>[f("Chac-Mool Puente")]),_:1}),f(".")]),o("div",De,[p(o("select",{"onUpdate:modelValue":c[0]||(c[0]=e=>t(n).orden=e),class:"sel-trans"},[t(r)||t(d)?(s(),l("option",Pe,"Relevancia")):T("",!0),je,Fe],512),[[$,t(n).orden]]),p(o("select",{"onUpdate:modelValue":c[1]||(c[1]=e=>t(n).categoria=e),class:"sel-trans"},[Ne,(s(),l(g,null,y(W,(e,m)=>o("option",{key:m,value:m},w(e),9,Qe)),64))],512),[[$,t(n).categoria]]),p(o("select",{"onUpdate:modelValue":c[2]||(c[2]=e=>t(n).ano=e),class:"sel-trans"},[Ee,(s(!0),l(g,null,y(H,e=>(s(),l("option",{key:e,value:e},w(e),9,Oe))),128))],512),[[$,t(n).ano]]),i(ae,{arguments:t(n),class:"ml-auto sel-trans",modelValue:t(d),"onUpdate:modelValue":c[3]||(c[3]=e=>ke(d)?d.value=e:null),onFocus:Z,onSearch:c[4]||(c[4]=e=>C.value=!0),onBlur:ee},null,8,["arguments","modelValue"])]),o("div",Ge,[o("div",ze,[!t(r)||a.completo?(s(),l("div",Je,[p(i(se,{results:a.listado,arguments:t(n),class:z(((F=a.listado.data)==null?void 0:F.length)==0?"mb-64":""),"valid-search":a.busquedaValida},null,8,["results","arguments","class","valid-search"]),[[b,!t(r)||t(r)&&!t(C)&&(a.filtrado||((N=a.listado.data)==null?void 0:N.length)&&a.listado.data[0].extractos)]])])):T("",!0),t(_).vistaComunicados==R&&a.listado.data&&((Q=a.listado.data)==null?void 0:Q.length)>0?(s(),U(le,{key:1,class:"gap-4","col-width":"24rem"},{default:S(()=>[(s(!0),l(g,null,y(a.listado.data,e=>(s(),U(ne,{key:e.id,title:e.titulo,image:e.imagen,"image-class":"h-80",href:u.route("comunicado",e.slug),description:e.descripcion,date:e.published_at,imageLeft:""},null,8,["title","image","href","description","date"]))),128))]),_:1})):t(_).vistaComunicados==J&&a.listado.data&&((E=a.listado.data)==null?void 0:E.length)>0?(s(),l("table",Ke,[We,o("tbody",Ye,[(s(!0),l(g,null,y(a.listado.data,(e,m)=>(s(),l("tr",{key:e.slug,class:"table-row"},[o("td",Xe,w(e.fecha_comunicado),1),o("td",Ze,[i(j,{href:u.route("comunicado",e.slug),class:"hover:underline py-2",innerHTML:e.titulo},null,8,["href","innerHTML"])])]))),128))])])):(s(),l("div",eo,[t(r)&&t(C)?(s(),l("div",oo,[i(ce),f(" Buscando ... ")])):t(r)&&(!a.completo||!a.filtrado)?(s(),l("div",to,[o("h2",null,[i(v,{icon:"ph:info-duotone",class:"inline mr-4 transform -translate-y-1"}),f("Instrucciones para la búsqueda completa ")]),ao,o("p",null,[f("Para ello ve a la "),o("div",{class:"inline text-primary cursor-pointer after:content-['↗'] hover:underline",onClick:oe},"casilla de búsqueda"),f(', pon el texto a buscar y pulsa en el botón "BUSCAR".')])])):(s(),l("div",so,[(s(!0),l(g,null,y(a.listado.data,(e,m)=>{var G;return s(),l("div",{key:e.slug,class:"card overflow-hidden shadow border border-black border-opacity-[0.1] flex flex-col gap-1 bg-info dark:bg-black bg-opacity-[0.1] dark:bg-opacity-[0.1]"},[o("div",no,[i(j,{href:u.route("comunicado",e.slug),class:"hover:underline py-2",innerHTML:e.titulo},null,8,["href","innerHTML"]),o("div",lo,w(e.fecha_comunicado),1),p(i(v,{icon:"ph:caret-up-duotone",class:"text-xl cursor-pointer",onClick:L=>t(k)[m]=!0},null,8,["onClick"]),[[b,!t(k)[m]]]),p(i(v,{icon:"ph:caret-down-duotone",class:"text-xl cursor-pointer",onClick:L=>t(k)[m]=!1},null,8,["onClick"]),[[b,t(k)[m]]])]),p(o("div",co,[(G=e.extractos)!=null&&G.length?T("",!0):(s(),l("div",io,uo)),(s(!0),l(g,null,y(e.extractos,(L,re)=>(s(),l("div",{key:re,class:"py-3"},[o("div",{innerHTML:L},null,8,mo)]))),128))],512),[[b,!t(k)[m]]])])}),128))]))])),!t(r)||t(r)&&!t(C)&&((O=a.listado.data)!=null&&O.length)&&a.listado.data[0].extractos?(s(),U(ie,{key:4,class:"mt-6",links:a.listado.links},null,8,["links"])):T("",!0)])])])}}}),Uo=Be(po,[["__scopeId","data-v-2979c891"]]);export{Uo as default};
