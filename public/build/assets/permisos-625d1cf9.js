import{r as t}from"./iconify-4eda29ca.js";const i=t({audio:null,music:null,state:"stopped",radioMode:!1,closed:!0,mini:!0,autoplay:!0,duration:0,currentTime:0,init(){console.log("player.init()..."),document&&(this.audio=new Audio,this.audio.autoplay=this.autoplay,this.audio.className="hidden",this.audio.addEventListener("loadedmetadata",u),this.audio.addEventListener("canplay",l),this.audio.addEventListener("error",r),this.audio.addEventListener("timeupdate",m),this.audio.addEventListener("ended",h),this.audio.addEventListener("play",c),this.audio.addEventListener("paused",p),this.audio.addEventListener("waiting",f),this.audio.addEventListener("abort",d),this.audio.preload="auto",console.log("player.init() ended!"))},isPlayable(e){return console.log("isPlayable?",e),e.match(/\.(mp3|mp4|ogg|wav|flac|aac|wma|aiff|amr|opus)$/i)},play(e,a,s={}){if(!this.audio){console.error("audio no inicializado");return}const{artist:o,isRadio:n}=s;this.music={src:e,title:a,artist:o},this.radioMode=!!n,this.closed=!1,this.audio.src=e,this.audio.play()},pause(){this.audio.pause(),this.state="paused"},playPause(){try{this.audio.paused?(this.audio.play(),this.state="playing"):(this.audio.pause(),this.state="paused")}catch(e){console.error("playPause interrupted",e),this.state="error"}},close(){this.audio.pause(),this.audio.src=null,this.music=null,this.state="stopped",this.closed=!0},stepForward(){!this.audio.paused&&!this.audio.ended?this.audio.currentTime+=30:this.audio.currentTime+=30},stepBackward(){this.audio.currentTime-=30}});function r(e){i.state="error"}function u(e){}function d(e){}function l(e){i.duration=i.audio.duration,i.currentTime=i.audio.currentTime,i.autoplay&&i.audio.play()}function c(e){i.state="playing"}function p(e){i.state="paused"}function h(e){i.state="stopped"}function m(e){i.currentTime=i.audio.currentTime}function f(e){}function g(){return i}console.log("player.state.init");i.init();const y=t({permisos:[],cargarPermisos(){fetch("/usuarios/_permisos").then(e=>e.json()).then(e=>{console.log("permisos response",e),this.permisos=e}).catch(e=>{console.error("Error al cargar los permisos:",e)})},tienePermiso(e){return this.permisos.includes(e)}});function E(){return y}export{E as a,g as u};
