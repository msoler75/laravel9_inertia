import{_ as q}from"./Spinner-244d9358.js";import{A as r,a5 as E,a4 as b,aa as I,K as y,B as h,M as L,F as t,W as k,a1 as S,G as d,C as g,$ as _,J as V,D as M,a2 as T,aC as U,H as z,a9 as D,a8 as x}from"./iconify-4eda29ca.js";const N={class:"flex items-center gap-3"},R=["onClick","disabled"],F={class:"absolute z-10 right-2 transform scale-110 -translate-y-[.1rem] text-gray-600"},P=["onSubmit"],W=["onKeydown","name","placeholder"],G={__name:"SearchInput",props:{modelValue:String,keyword:{type:String,required:!1,default:"buscar"},placeholder:{type:String,required:!1,default:"Buscar..."},arguments:{},doSearch:{type:Boolean,default:!0}},emits:["update:modelValue","search","focus","blur"],setup(i,{emit:l}){const s=i,B=r(200),a=r(s.modelValue),c=r(""),n=r("");let m=null;E(()=>{c.value=window.location.href.replace(/\?.*/,"");const e=window.location.search,o=new URLSearchParams(e);o.has(s.keyword)&&(n.value=o.get(s.keyword),a.value=n.value,console.log("from URL search",n.value)),l("update:modelValue",a.value),document.addEventListener("keydown",C)});const p=r(!1);b(()=>s.modelValue,e=>{a.value=e}),b(()=>s.arguments,e=>p.value=!0,{deep:!0}),b(a,e=>l("update:modelValue",e));const u=r(!1),w=()=>{u.value=!0;var e={};e[s.keyword]=a.value,typeof s.arguments=="object"&&(e={...s.arguments,...e}),p.value=!1,x.get(c.value,e),l("search",a.value)},f=()=>{a.value="",l("update:modelValue",a.value),m&&clearTimeout(m),n.value&&(m=setTimeout(()=>{x.get(c.value)},1e3))},C=e=>{e.key==="Escape"&&f()};return(e,o)=>{const $=q,K=I("Icon");return y(),h("div",N,[L(e.$slots,"default"),t(a)?(y(),h("button",{key:0,type:"button",onClick:f,class:"btn border border-gray-500 border-opacity-20"}," Limpiar ")):k("",!0),t(a)?(y(),h("button",{key:1,type:"submit",onClick:S(w,["prevent"]),class:"btn btn-primary",disabled:t(u)||t(a)==t(n)&&!t(p)}," Buscar ",8,R)):k("",!0),d("div",{class:"flex items-center relative",style:D({"max-width":t(B)+"px"})},[d("div",F,[g(V($,null,null,512),[[_,t(u)]]),g(V(K,{icon:"ph:magnifying-glass-bold"},null,512),[[_,!t(u)]])]),d("form",{onSubmit:S(w,["prevent"])},[g(d("input",{class:T(["search-input pr-8 focus:bg-base-100 relative bg-transparent shadow-none px-6 py-3 focus:shadow-outline text-right w-full focus:rounded-md",t(a)?"border-0 border-b border-gray-700 focus:border-b":"border-transparent"]),onKeydown:U(f,["Esc"]),autocomplete:"off",type:"text",name:i.keyword,placeholder:i.placeholder,onFocus:o[0]||(o[0]=v=>e.$emit("focus")),onBlur:o[1]||(o[1]=v=>e.$emit("blur")),"onUpdate:modelValue":o[2]||(o[2]=v=>z(a)?a.value=v:null)},null,42,W),[[M,t(a)]])],40,P)],4)])}}};export{G as _};
